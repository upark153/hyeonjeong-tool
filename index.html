        // ì§ˆë¬¸ ëª©ë¡ ìƒì„±<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ë…¸í˜„ì •ì„ ìœ„í•œ ë©´ì ‘ ì‹œë®¬ë ˆì´í„°</title>
    
    <!-- PWA ì„¤ì • -->
    <meta name="theme-color" content="#2a5298">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="í˜„ì •ì´ ë©´ì ‘ë„êµ¬">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- ì•„ì´ì½˜ ì„¤ì • -->
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">
    
    <!-- ë§¤ë‹ˆí˜ìŠ¤íŠ¸ -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoi64W466qE7KCV7J2EIOychO2VnCDrqbTsoKXrj4TqtawiLCJzaG9ydF9uYW1lIjoi7YOE7KCV7J2EIOyhqyIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjMWUzYzcyIiwidGhlbWVfY29sb3IiOiIjMmE1Mjk4IiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFEVWxFUVZSNDJtTmtZUGhmRHdBQ2h3R0E2MGU2a2dBQUFBQkpSVTVFcmtKZ2dnPT0iLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIn1dfQ==">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* PWA ì„¤ì¹˜ ë²„íŠ¼ */
        .install-prompt {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            z-index: 1001;
            display: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .install-prompt:active {
            background: #229954;
            transform: scale(0.95);
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 1.2em;
            margin-bottom: 10px;
            text-align: center;
        }

        .timer {
            text-align: center;
            background: #3498db;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin: 0 auto;
        }

        .menu-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .menu-btn {
            flex: 1;
            background: #3498db;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 10px;
            font-size: 0.8em;
            cursor: pointer;
            min-height: 44px;
        }

        .menu-btn:active {
            background: #2980b9;
            transform: scale(0.95);
        }

        .main-container {
            padding-top: 120px;
            padding-bottom: 100px;
            min-height: 100vh;
        }

        #canvas-container {
            width: 95%;
            height: 400px;
            margin: 20px auto;
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .fallback-screen {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .fallback-screen h2 {
            font-size: 1.5em;
            margin: 20px 0 10px 0;
        }

        .fallback-screen .icon {
            font-size: 4em;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .speech-bubble {
            position: fixed;
            bottom: 80px;
            left: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 150;
            max-height: 30vh;
            overflow-y: auto;
        }

        .bubble-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .interviewer-name {
            font-weight: bold;
            color: #e74c3c;
            flex: 1;
        }

        .answer-btn {
            background: #f39c12;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8em;
            cursor: pointer;
        }

        .answer-btn:active {
            background: #e67e22;
        }

        .question-text {
            font-size: 1em;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .question-info {
            font-size: 0.8em;
            color: #7f8c8d;
            font-weight: bold;
        }

        .bottom-controls {
            position: fixed;
            bottom: 15px;
            left: 15px;
            right: 15px;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            z-index: 200;
        }

        .control-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 6px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            min-height: 50px;
            transition: all 0.2s;
        }

        .control-btn:active {
            transform: scale(0.95);
            background: #2980b9;
        }

        .control-btn.restart {
            background: #e74c3c;
        }

        .control-btn.restart:active {
            background: #c0392b;
        }

        .control-btn.answer {
            background: #f39c12;
        }

        .control-btn.answer:active {
            background: #e67e22;
        }

        .start-btn {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #27ae60;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            z-index: 200;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .start-btn:active {
            background: #229954;
            transform: translateX(-50%) scale(0.95);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            max-width: 90%;
            width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .close-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 16px;
        }

        .modal-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 5px;
            cursor: pointer;
        }

        .modal-btn:active {
            background: #2980b9;
        }

        .modal-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 16px;
        }

        .answer-panel {
            position: fixed;
            top: 120px;
            left: 15px;
            right: 15px;
            bottom: 150px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            display: none;
            z-index: 300;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .answer-panel.show {
            display: block;
        }

        .answer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .answer-content {
            line-height: 1.6;
            font-size: 0.9em;
            max-height: 150px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            -webkit-overflow-scrolling: touch;
        }

        .answer-textarea {
            width: 100%;
            min-height: 100px;
            max-height: 120px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .saved-answers {
            margin-top: 15px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 8px;
            border: 1px solid #ddd;
            max-height: 200px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .saved-answer-item {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            font-size: 0.85em;
            line-height: 1.4;
        }

        .saved-answer-header {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .saved-answer-text {
            color: #34495e;
            word-wrap: break-word;
        }

        .save-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            margin-top: 10px;
            cursor: pointer;
        }

        .save-btn:active {
            background: #229954;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1em;
            }
            
            .menu-btn {
                font-size: 0.7em;
                padding: 8px;
            }
            
            .speech-bubble {
                font-size: 0.9em;
                padding: 15px;
            }
            
            .control-btn {
                font-size: 0.7em;
                padding: 10px 4px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="install-prompt" id="installBtn" onclick="installApp()">ğŸ“± ì•± ì„¤ì¹˜</button>
        <h1>ğŸ’• ë…¸í˜„ì •ì„ ìœ„í•œ ì „ë¶ëŒ€í•™êµ ì‚¬ì„œì§ ë©´ì ‘ ì‹œë®¬ë ˆì´í„°</h1>
        <div style="text-align: center;">
            <div class="timer" id="timer">00:00</div>
        </div>
        <div style="font-size: 0.8em; text-align: center; margin-top: 8px; color: #e74c3c; font-weight: bold;">
            ğŸ’• í˜„ì •ì•„, ë©´ì ‘ ì¤€ë¹„ í™”ì´íŒ…! ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤ ğŸ’•<br>
            ğŸ“… 2025. 7. 18.(ê¸ˆ) 14:00~ | ğŸ“ ëŒ€í•™ë³¸ë¶€ 2ì¸µ | ğŸ’¼ ì‹ ë¶„ì¦ í•„ìˆ˜
        </div>
        <div class="menu-buttons">
            <button class="menu-btn" onclick="showModal('questions')">ğŸ“ ì§ˆë¬¸ëª©ë¡</button>
            <button class="menu-btn" onclick="showModal('tips')">ğŸ’¡ ë©´ì ‘íŒ</button>
            <button class="menu-btn" onclick="showModal('info')">ğŸ“‹ ì±„ìš©ê³µê³ </button>
            <button class="menu-btn" onclick="showModal('message')">ğŸ’• ì‘ì›ë©”ì‹œì§€</button>
        </div>
    </div>

    <div class="main-container">
        <div id="canvas-container">
            <div class="fallback-screen">
                <div class="icon">ğŸ’•</div>
                <h2>ë…¸í˜„ì •ì„ ìœ„í•œ ë©´ì ‘ì‹¤</h2>
                <p>ì „ë¶ëŒ€í•™êµ ì‚¬ì„œì§ ë©´ì ‘ í™˜ê²½ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    <p style="margin: 0; font-size: 0.9em;">ğŸ’• í˜„ì •ì•„, ë‹¹ì‹ ì´ë¼ë©´ ê¼­ í•  ìˆ˜ ìˆì–´ìš”!</p>
                </div>
            </div>
        </div>

        <div class="speech-bubble" id="speechBubble">
            <div class="bubble-header">
                <div class="avatar" id="avatar">ğŸ‘¨â€ğŸ’¼</div>
                <div class="interviewer-name" id="interviewer">ë©´ì ‘ê´€ 1</div>
                <button class="answer-btn" onclick="toggleAnswers()">ğŸ’¡ ë‹µë³€</button>
            </div>
            <div class="question-text" id="questionText">ë©´ì ‘ì„ ì‹œì‘í•˜ë ¤ë©´ í•˜ë‹¨ì˜ 'ë©´ì ‘ ì‹œì‘' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</div>
            <div class="question-info" id="questionInfo">ì¤€ë¹„ì¤‘</div>
        </div>

        <button class="start-btn" id="startBtn" onclick="startInterview()">ğŸ’• í˜„ì •ì•„, ë©´ì ‘ ì‹œì‘í•´ìš”!</button>

        <div class="bottom-controls hidden" id="controls">
            <button class="control-btn restart" onclick="location.reload()">ğŸ”„ ì¬ì‹œì‘</button>
            <button class="control-btn" onclick="prevQuestion()">â¬…ï¸ ì´ì „</button>
            <button class="control-btn" onclick="nextQuestion()">â¡ï¸ ë‹¤ìŒ</button>
            <button class="control-btn" onclick="togglePause()">â¸ï¸ ì •ì§€</button>
            <button class="control-btn answer" onclick="toggleAnswers()">ğŸ’¡ ë‹µë³€</button>
        </div>

        <!-- ë‹µë³€ íŒ¨ë„ -->
        <div class="answer-panel" id="answerPanel">
            <div class="answer-header">
                <h3 id="answerTitle">ğŸ’¡ ëª¨ë²”ë‹µë³€</h3>
                <button class="close-btn" onclick="hideAnswers()">Ã—</button>
            </div>
            <div class="answer-content" id="answerContent">
                ëª¨ë²”ë‹µë³€ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
            <div id="myAnswerSection" style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #eee;">
                <h4>âœï¸ ë‚´ ë‹µë³€ ì‘ì„±</h4>
                <textarea class="answer-textarea" id="myAnswerText" placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
                <button class="save-btn" onclick="saveAnswer()">ğŸ’¾ ì €ì¥</button>
                
                <div class="saved-answers" id="savedAnswers">
                    <h5 style="margin: 0 0 10px 0; color: #2c3e50;">ğŸ“ ì €ì¥ëœ ë‹µë³€ë“¤</h5>
                    <div id="savedAnswersList">
                        <p style="color: #7f8c8d; font-style: italic; margin: 0;">ì•„ì§ ì €ì¥ëœ ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì‘ì› ë©”ì‹œì§€ ëª¨ë‹¬ ì¶”ê°€ -->
    <div class="modal" id="messageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ’• í˜„ì •ì•„, ë‹¹ì‹ ì„ ìœ„í•œ ì‘ì› ë©”ì‹œì§€</h3>
                <button class="close-btn" onclick="hideModal()">&times;</button>
            </div>
            <div style="text-align: center; line-height: 1.8;">
                <p>ğŸŒŸ <strong>í˜„ì •ì•„, ë‹¹ì‹ ì€ ì •ë§ ëŒ€ë‹¨í•´ìš”!</strong></p>
                <p>ğŸ“š ì§€ê¸ˆê¹Œì§€ ìŒ“ì•„ì˜¨ ëª¨ë“  ê²½í—˜ê³¼ ë…¸ë ¥ì´<br>ë¶„ëª…íˆ ì¢‹ì€ ê²°ê³¼ë¡œ ì´ì–´ì§ˆ ê±°ì˜ˆìš”</p>
                <p>ğŸ’ª ë©´ì ‘ì¥ì—ì„œë„ í‰ì†Œ ê·¸ëŒ€ë¡œì˜ ëª¨ìŠµìœ¼ë¡œ<br>ìì‹ ê° ìˆê²Œ ë‹µë³€í•˜ì„¸ìš”</p>
                <p>ğŸ¯ ì „ë¶ëŒ€í•™êµ ì‚¬ì„œì§, ë‹¹ì‹ ì´ ê¼­ í•´ë‚¼ ìˆ˜ ìˆì–´ìš”!</p>
                <p>ğŸ’• <strong>ì–¸ì œë‚˜ ë‹¹ì‹ ì„ ì‘ì›í•˜ê³  ìˆì–´ìš”</strong></p>
                <div style="margin-top: 20px; padding: 15px; background: #ffe6f2; border-radius: 10px;">
                    <p style="margin: 0; color: #d63384;">â¤ï¸ ë©´ì ‘ ì „ë‚ ê¹Œì§€ ì´ ë„êµ¬ë¡œ ì¶©ë¶„íˆ ì—°ìŠµí•˜ê³ ,<br>ë‹¹ë‹¹í•˜ê²Œ ë©´ì ‘ ë³´ì‹œê¸¸ ë°”ë¼ìš”!</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="questionsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“ í˜„ì •ì´ë¥¼ ìœ„í•œ ë©´ì ‘ ì§ˆë¬¸ ëª©ë¡</h3>
                <button class="close-btn" onclick="hideModal()">&times;</button>
            </div>
            <div id="questionsList"></div>
        </div>
    </div>

    <div class="modal" id="tipsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ’¡ ë©´ì ‘ ì¤€ë¹„ íŒ</h3>
                <button class="close-btn" onclick="hideModal()">&times;</button>
            </div>
            <div>
                <h4>ğŸ¯ ê¸°ë³¸ ìì„¸</h4>
                <ul>
                    <li>ìì‹ ê° ìˆëŠ” ìì„¸ì™€ ë°ì€ í‘œì • ìœ ì§€</li>
                    <li>ë©´ì ‘ê´€ê³¼ ì ì ˆí•œ ì•„ì´ì»¨íƒ</li>
                    <li>ëª…í™•í•˜ê³  ë˜ë ·í•œ ë°œìŒìœ¼ë¡œ ë‹µë³€</li>
                </ul>
                <h4>ğŸ“š ë‹µë³€ êµ¬ì„±ë²•</h4>
                <ul>
                    <li>STAR ê¸°ë²• í™œìš© (ìƒí™©-ê³¼ì œ-í–‰ë™-ê²°ê³¼)</li>
                    <li>êµ¬ì²´ì ì¸ ì‚¬ë¡€ì™€ ê²½í—˜ ì œì‹œ</li>
                    <li>ì „ë¶ëŒ€í•™êµì— ëŒ€í•œ ì´í•´ë„ í‘œí˜„</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“‹ ì‚¬ì„œ 9ê¸‰ ì±„ìš©ê³µê³ </h3>
                <button class="close-btn" onclick="hideModal()">&times;</button>
            </div>
            <div>
                <h4>ğŸ“Œ ëª¨ì§‘ì¸ì›</h4>
                <p>â€¢ ì‚¬ì„œ 9ê¸‰ 1ëª…</p>
                <h4>ğŸ’¼ ë‹´ë‹¹ì—…ë¬´</h4>
                <p>â€¢ ëŒ€í•™ë„ì„œê´€ ìë£Œ ê´€ë¦¬ ë° ì—°êµ¬Â·í•™ìŠµì§€ì› ì„œë¹„ìŠ¤</p>
                <p>â€¢ ë„ì„œê´€ í†µí•©ìš´ì˜ì‹œìŠ¤í…œ ê´€ë¦¬</p>
                <p>â€¢ ì‚¬ì„œ í–‰ì •ì¼ë°˜ ë“± ì œë°˜ ì—…ë¬´</p>
                <h4>ğŸ¯ ë©´ì ‘ í‰ì •ìš”ì†Œ</h4>
                <p>â€¢ ì†Œí†µÂ·ê³µê° â€¢ í—Œì‹ Â·ì—´ì • â€¢ ì°½ì˜Â·í˜ì‹  â€¢ ìœ¤ë¦¬Â·ì±…ì„</p>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentQuestion = 0;
        let isStarted = false;
        let isPaused = false;
        let startTime = 0;
        let timerInterval = null;
        let userId = 'ë…¸í˜„ì •'; // ê³ ì •ëœ ì‚¬ìš©ì ID
        let answers = {};
        let deferredPrompt; // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸

        // ë©´ì ‘ ì§ˆë¬¸ ë°ì´í„°
        const questions = [
            {
                text: "ê°„ë‹¨í•œ ìê¸°ì†Œê°œë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
                category: "ì¸ì„±Â·ê³µì§ê´€",
                interviewer: "ë©´ì ‘ê´€ 1",
                answer: "ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ. ì „ë¶ëŒ€í•™êµ ì‚¬ì„œì§ì— ì§€ì›í•œ â—‹â—‹â—‹ì…ë‹ˆë‹¤. ëª©í¬ì‹œë¦½ë„ì„œê´€ì—ì„œ 4ë…„ê°„ ê·¼ë¬´í•˜ë©° ë„ì„œê´€ ìš´ì˜ ì „ë°˜ì— ëŒ€í•œ ì‹¤ë¬´ ê²½í—˜ì„ ìŒ“ì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ ì´ìš©ì ì„œë¹„ìŠ¤ì™€ ìë£Œ ê´€ë¦¬ ì—…ë¬´ì—ì„œ ì²´ê³„ì ì¸ ì—…ë¬´ ì²˜ë¦¬ ëŠ¥ë ¥ì„ ê¸°ë¥¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤."
            },
            {
                text: "ì „ë¶ëŒ€í•™êµë¡œ ì „ì…í•˜ë ¤ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?",
                category: "í—Œì‹ Â·ì—´ì •",
                interviewer: "ë©´ì ‘ê´€ 1",
                answer: "ì²«ì§¸, ì „ë¶ëŒ€í•™êµê°€ ì¶”ì§„í•˜ëŠ” ê¸€ë¡œì»¬ëŒ€í•™30 ì‚¬ì—…ì— ì°¸ì—¬í•˜ì—¬ ëŒ€í•™ì˜ ë°œì „ì— ê¸°ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ë‘˜ì§¸, ëŒ€í•™ë„ì„œê´€ì€ ì—°êµ¬ì§€ì› ì„œë¹„ìŠ¤ê°€ í•µì‹¬ì¸ë°, ëª©í¬ì‹œë¦½ë„ì„œê´€ì—ì„œì˜ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ë” ì „ë¬¸ì ì¸ í•™ìˆ ì •ë³´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ì‹¶ìŠµë‹ˆë‹¤."
            },
            {
                text: "ë„ì„œê´€ ì´ìš©ìì™€ ê°ˆë“±ì´ ë°œìƒí–ˆì„ ë•Œ ì–´ë–»ê²Œ í•´ê²°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                category: "ì†Œí†µÂ·ê³µê°",
                interviewer: "ë©´ì ‘ê´€ 2",
                answer: "ë¨¼ì € ì´ìš©ìì˜ ì…ì¥ì—ì„œ ìƒí™©ì„ ê²½ì²­í•˜ê³  ê³µê°ì„ í‘œí˜„í•©ë‹ˆë‹¤. ê°ì •ì  ëŒ€ì‘ë³´ë‹¤ëŠ” ëƒ‰ì •í•˜ê²Œ ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³ , ë„ì„œê´€ ê·œì •ê³¼ ì´ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ì¡°ìœ¨í•  ìˆ˜ ìˆëŠ” í•©ë¦¬ì  í•´ê²°ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤."
            },
            {
                text: "ì „ë¶ëŒ€í•™êµ ì¤‘ì•™ë„ì„œê´€ì˜ íŠ¹ìƒ‰ì— ëŒ€í•´ ì•„ëŠ” ê²ƒì´ ìˆë‚˜ìš”?",
                category: "ì°½ì˜Â·í˜ì‹ ",
                interviewer: "ë©´ì ‘ê´€ 3",
                answer: "ì „ë¶ëŒ€ ì¤‘ì•™ë„ì„œê´€ì€ ì§€ì—­ ê±°ì êµ­ë¦½ëŒ€í•™ìœ¼ë¡œì„œ í’ë¶€í•œ í•™ìˆ ìë£Œë¥¼ ë³´ìœ í•˜ê³  ìˆìœ¼ë©°, íŠ¹íˆ í•œêµ­í•™ ê´€ë ¨ íŠ¹ì„±í™” ìë£Œê°€ ìš°ìˆ˜í•˜ë‹¤ê³  ì•Œê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ ê¸€ë¡œì»¬ëŒ€í•™30 ì‚¬ì—…ê³¼ ì—°ê³„í•˜ì—¬ êµ­ì œí™”ëœ í•™ìŠµí™˜ê²½ ì¡°ì„±ì— í˜ì“°ê³  ìˆìŠµë‹ˆë‹¤."
            },
            {
                text: "ê³µë¬´ì›ìœ¼ë¡œì„œ ê°€ì ¸ì•¼ í•  ìœ¤ë¦¬ì˜ì‹ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?",
                category: "ìœ¤ë¦¬Â·ì±…ì„",
                interviewer: "ë©´ì ‘ê´€ 1",
                answer: "ê³µë¬´ì›ì€ êµ­ë¯¼ ì „ì²´ì˜ ë´‰ì‚¬ìë¡œì„œ ê³µì •ì„±ê³¼ íˆ¬ëª…ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ í•´ì•¼ í•©ë‹ˆë‹¤. ê°œì¸ì  ì´ìµë³´ë‹¤ ê³µìµì„ ìš°ì„ ì‹œí•˜ê³ , ì—…ë¬´ ì²˜ë¦¬ ì‹œ í¸ê²¬ ì—†ì´ ëª¨ë“  ì´ìš©ìë¥¼ í‰ë“±í•˜ê²Œ ëŒ€í•´ì•¼ í•©ë‹ˆë‹¤."
            },
            {
                text: "ë§ˆì§€ë§‰ìœ¼ë¡œ í•˜ê³  ì‹¶ì€ ë§ì”€ì´ ìˆë‹¤ë©´?",
                category: "ì¢…í•©",
                interviewer: "ë©´ì ‘ê´€ 1",
                answer: "4ë…„ê°„ì˜ ëª©í¬ì‹œë¦½ë„ì„œê´€ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì „ë¶ëŒ€í•™êµ ë°œì „ì— ê¸°ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ê¸€ë¡œì»¬ëŒ€í•™30 ì‚¬ì—…ê³¼ í•¨ê»˜ ì„±ì¥í•˜ë©°, ì´ìš©ì ì¤‘ì‹¬ì˜ ì„œë¹„ìŠ¤ ë§ˆì¸ë“œë¡œ ëŒ€í•™êµ¬ì„±ì›ë“¤ì˜ ì—°êµ¬ì™€ í•™ìŠµì„ ì ê·¹ ì§€ì›í•˜ê² ìŠµë‹ˆë‹¤."
            }
        ];

        // Three.js ì´ˆê¸°í™”
        function initThreeJS() {
            try {
                const container = document.getElementById('canvas-container');
                if (!container) return;

                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x87CEEB);

                const camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.set(0, 6, 12);

                const renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(container.clientWidth, container.clientHeight);
                renderer.setClearColor(0x87CEEB);

                // ê¸°ì¡´ ë‚´ìš© ì§€ìš°ê³  ìº”ë²„ìŠ¤ ì¶”ê°€
                container.innerHTML = '';
                container.appendChild(renderer.domElement);

                // ì¡°ëª…
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                directionalLight.position.set(0, 15, 5);
                scene.add(directionalLight);

                // ë°”ë‹¥
                const floorGeometry = new THREE.PlaneGeometry(25, 20);
                const floorMaterial = new THREE.MeshLambertMaterial({ color: 0xc0c0c0 });
                const floor = new THREE.Mesh(floorGeometry, floorMaterial);
                floor.rotation.x = -Math.PI / 2;
                scene.add(floor);

                // ë’·ë²½
                const wallGeometry = new THREE.PlaneGeometry(25, 12);
                const wallMaterial = new THREE.MeshLambertMaterial({ color: 0xf5f5dc });
                const wall = new THREE.Mesh(wallGeometry, wallMaterial);
                wall.position.set(0, 6, -10);
                scene.add(wall);

                // í…Œì´ë¸”
                const tableGeometry = new THREE.BoxGeometry(6, 0.15, 2.5);
                const tableMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
                const table = new THREE.Mesh(tableGeometry, tableMaterial);
                table.position.set(0, 1.5, 0);
                scene.add(table);

                // ì• ë‹ˆë©”ì´ì…˜
                function animate() {
                    requestAnimationFrame(animate);
                    renderer.render(scene, camera);
                }
                animate();

                // ë¦¬ì‚¬ì´ì¦ˆ
                window.addEventListener('resize', () => {
                    camera.aspect = container.clientWidth / container.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(container.clientWidth, container.clientHeight);
                });

                // 3D í™˜ê²½ ì´ˆê¸°í™” ì™„ë£Œ
            } catch (error) {
                // 3D ì´ˆê¸°í™” ì‹¤íŒ¨, ëŒ€ì²´ í™”ë©´ ì‚¬ìš©
            }
        }

        // ë©´ì ‘ ì‹œì‘
        function startInterview() {
            isStarted = true;
            startTime = Date.now();
            currentQuestion = 0;
            
            document.getElementById('startBtn').classList.add('hidden');
            document.getElementById('controls').classList.remove('hidden');
            
            showQuestion();
            startTimer();
        }

        // ì§ˆë¬¸ í‘œì‹œ
        function showQuestion() {
            if (currentQuestion < questions.length) {
                const q = questions[currentQuestion];
                document.getElementById('questionText').textContent = q.text;
                document.getElementById('interviewer').textContent = q.interviewer;
                document.getElementById('questionInfo').textContent = `Q${currentQuestion + 1}/${questions.length} | ${q.category}`;
                
                const avatars = ['ğŸ‘¨â€ğŸ’¼', 'ğŸ‘¨â€ğŸ«', 'ğŸ‘©â€ğŸ’¼'];
                document.getElementById('avatar').textContent = avatars[currentQuestion % 3];
            }
        }

        // íƒ€ì´ë¨¸
        function startTimer() {
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    const elapsed = Math.floor((Date.now() - startTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    document.getElementById('timer').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        // ì§ˆë¬¸ ì´ë™
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                alert('ğŸ‰ ëª¨ë“  ì§ˆë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // ì¼ì‹œì •ì§€
        function togglePause() {
            isPaused = !isPaused;
            const btn = document.querySelector('.control-btn:nth-child(4)');
            btn.textContent = isPaused ? 'â–¶ï¸ ì¬ìƒ' : 'â¸ï¸ ì •ì§€';
        }

        // ë‹µë³€ íŒ¨ë„
        function toggleAnswers() {
            const panel = document.getElementById('answerPanel');
            if (panel.classList.contains('show')) {
                hideAnswers();
            } else {
                showAnswers();
            }
        }

        function showAnswers() {
            if (currentQuestion < questions.length) {
                const q = questions[currentQuestion];
                document.getElementById('answerTitle').textContent = 'ğŸ’¡ ëª¨ë²”ë‹µë³€';
                document.getElementById('answerContent').textContent = q.answer;
                document.getElementById('answerPanel').classList.add('show');
                
                // í˜„ì¬ ì§ˆë¬¸ì˜ ë‚´ ë‹µë³€ ë¡œë“œ (ìˆë‹¤ë©´)
                const myAnswer = answers[currentQuestion] || '';
                document.getElementById('myAnswerText').value = myAnswer;
                
                // ì €ì¥ëœ ë‹µë³€ ëª©ë¡ ì—…ë°ì´íŠ¸
                updateSavedAnswersList();
            }
        }

        function hideAnswers() {
            document.getElementById('answerPanel').classList.remove('show');
        }

        // ë‹µë³€ ì €ì¥
        function saveAnswer() {
            const textArea = document.getElementById('myAnswerText');
            if (!textArea) {
                alert('âŒ ë‹µë³€ ì…ë ¥ ì˜ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const text = textArea.value.trim();
            if (!text) {
                alert('í˜„ì •ì•„, ë‹µë³€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ’•');
                return;
            }
            
            // í˜„ì¬ ì§ˆë¬¸ì— ë‹µë³€ ì €ì¥
            answers[currentQuestion] = text;
            
            // localStorageì— ì €ì¥
            try {
                const savedData = JSON.parse(localStorage.getItem('interview_answers') || '{}');
                if (!savedData[userId]) savedData[userId] = {};
                savedData[userId][currentQuestion] = text;
                localStorage.setItem('interview_answers', JSON.stringify(savedData));
            } catch (error) {
                console.log('localStorage ì €ì¥ ì‹¤íŒ¨, ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥');
            }
            
            // ì €ì¥ ì„±ê³µ ë©”ì‹œì§€
            alert('âœ… í˜„ì •ì´ì˜ ë‹µë³€ì´ ì €ì¥ë˜ì—ˆì–´ìš”! ì˜í•˜ê³  ìˆì–´ìš” ğŸ’•');
            
            // ë‹µë³€ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
            updateAnswerCount();
            
            // ì €ì¥ëœ ë‹µë³€ ëª©ë¡ ì—…ë°ì´íŠ¸
            updateSavedAnswersList();
            
            // í…ìŠ¤íŠ¸ ì˜ì—­ ë¹„ìš°ê¸°
            textArea.value = '';
        }

        // ì €ì¥ëœ ë‹µë³€ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateSavedAnswersList() {
            const listElement = document.getElementById('savedAnswersList');
            if (!listElement) {
                return;
            }
            
            const savedAnswers = Object.keys(answers);
            
            if (savedAnswers.length === 0) {
                listElement.innerHTML = '<p style="color: #7f8c8d; font-style: italic; margin: 0;">ì•„ì§ ì €ì¥ëœ ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            listElement.innerHTML = '';
            
            savedAnswers.forEach(questionIndex => {
                const questionNum = parseInt(questionIndex) + 1;
                const questionText = questions[questionIndex]?.text || 'ì§ˆë¬¸ ì—†ìŒ';
                const answerText = answers[questionIndex];
                
                const answerItem = document.createElement('div');
                answerItem.className = 'saved-answer-item';
                answerItem.innerHTML = `
                    <div class="saved-answer-header">Q${questionNum}. ${questionText}</div>
                    <div class="saved-answer-text">${answerText}</div>
                `;
                
                listElement.appendChild(answerItem);
            });
        }

        // ëª¨ë‹¬ ê´€ë¦¬
        function showModal(type) {
            hideModal();
            
            if (type === 'questions') {
                generateQuestionsList();
                document.getElementById('questionsModal').style.display = 'flex';
            } else if (type === 'tips') {
                document.getElementById('tipsModal').style.display = 'flex';
            } else if (type === 'info') {
                document.getElementById('infoModal').style.display = 'flex';
            } else if (type === 'message') {
                document.getElementById('messageModal').style.display = 'flex';
            }
        }

        function hideModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        // ID ê´€ë¦¬ (ê³ ì •ëœ ì‚¬ìš©ìë¥¼ ìœ„í•´ ê°„ì†Œí™”)
        function updateAnswerCount() {
            // ID í‘œì‹œ ê´€ë ¨ ì½”ë“œ ì œê±° (ê³ ì • ì‚¬ìš©ì)
        }

        // PWA ì„¤ì¹˜ ê¸°ëŠ¥
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('ì•± ì„¤ì¹˜ ì™„ë£Œ');
                    }
                    deferredPrompt = null;
                    document.getElementById('installBtn').style.display = 'none';
                });
            }
        }

        // PWA ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'block';
        });

        window.addEventListener('appinstalled', () => {
            document.getElementById('installBtn').style.display = 'none';
            deferredPrompt = null;
        });
        function generateQuestionsList() {
            const list = document.getElementById('questionsList');
            list.innerHTML = '';
            
            questions.forEach((q, index) => {
                const item = document.createElement('div');
                item.style.cssText = `
                    padding: 12px;
                    margin: 8px 0;
                    background: ${index === currentQuestion ? '#e3f2fd' : '#f8f9fa'};
                    border-radius: 8px;
                    cursor: pointer;
                    border: 2px solid ${index === currentQuestion ? '#2196f3' : '#dee2e6'};
                `;
                
                item.innerHTML = `
                    <div style="font-weight: bold; color: #2196f3; margin-bottom: 4px;">Q${index + 1}</div>
                    <div style="font-size: 0.9em; margin-bottom: 6px;">${q.text}</div>
                    <div style="font-size: 0.8em; color: #666;">
                        ${q.category} | ${q.interviewer}
                        ${answers[index] ? ' | âœ… ë‹µë³€ì™„ë£Œ' : ''}
                    </div>
                `;
                
                item.onclick = () => {
                    if (isStarted) {
                        currentQuestion = index;
                        showQuestion();
                        hideModal();
                    }
                };
                
                list.appendChild(item);
            });
        }

        // ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            // 3D í™˜ê²½ ì´ˆê¸°í™” ì‹œë„
            setTimeout(() => {
                initThreeJS();
            }, 500);
            
            // ì €ì¥ëœ ë‹µë³€ ìë™ ë¡œë“œ (ë…¸í˜„ì • ì „ìš©)
            try {
                const savedData = localStorage.getItem('interview_answers');
                if (savedData) {
                    const allData = JSON.parse(savedData);
                    if (allData[userId]) {
                        answers = allData[userId];
                        updateSavedAnswersList();
                    }
                }
            } catch (error) {
                console.log('ì €ì¥ëœ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
            }
            
            // ëª¨ë°”ì¼ ìµœì í™”
            if (window.innerWidth <= 768) {
                document.body.style.fontSize = '14px';
            }
            
            // PWA ì„¤ì¹˜ ë²„íŠ¼ ì´ˆê¸° ì„¤ì •
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('installBtn').style.display = 'none';
            }
        });

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                hideModal();
                hideAnswers();
            }
        });

        // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(event) {
                if (event.target === modal) {
                    hideModal();
                }
            });
        });

        // í„°ì¹˜ ë””ë°”ì´ìŠ¤ ìµœì í™”
        if ('ontouchstart' in window) {
            document.body.style.webkitTouchCallout = 'none';
            document.body.style.webkitUserSelect = 'none';
        }
    </script>
</body>
</html>